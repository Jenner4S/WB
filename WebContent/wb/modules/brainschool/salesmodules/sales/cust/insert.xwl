{"hidden":false,"children":[{"configs":{"serverScript":"//获取唯一的13位ID字符串\nvar id = SysUtil.getId();\n//把id值设置到request的CUST_CODE属性中\napp.set({\n  CUST_CODE: id\n});\n\nvar recs = Wb.decode(request.getParameter('create'));\nWb.each(recs, function(rec) {\n  rec.CREATOR = app.get(\"sys.user\");\n  rec.UPDATOR = app.get(\"sys.user\");\n  rec.SALES_USER = app.get(\"sys.user\");\n  rec.CREATOR_TIME = new JavaDate();\n  rec.UPDATOR_TIME = new JavaDate();\n});\nrequest.setAttribute('create', Wb.encode(recs));\n\n//检查编号是否存在，如果存在抛出指定提示信息的异常。\napp.run('select 1 from BRAINSCHOOL_BUS_CUSTOMER where CUST_CODE={?CUST_CODE?}', {\n  errorText: '编号 \u201c' + app.get('CUST_CODE') + '\u201d 已经存在。'\n});\n//上面的代码建议使用以下方法，添加数据到指定表：\napp.update({\n  tableName: 'BRAINSCHOOL_BUS_CUSTOMER',\n  mode: 'insert'\n});\n//返回刚才添加的记录到客户端，供客户端插入更新到表格中\napp.output('select * from BRAINSCHOOL_BUS_CUSTOMER where CUST_CODE={?CUST_CODE?}', {\n  type: 'object'\n});","itemId":"module"},"expanded":true,"children":[],"type":"module"}],"roles":{},"title":"插入","iconCls":"","inframe":false,"pageLink":""}