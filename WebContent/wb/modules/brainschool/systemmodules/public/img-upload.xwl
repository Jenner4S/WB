{"hidden":false,"children":[{"configs":{"serverScript":"var data = app.get(); //获取request parameter，request attribute和session attributes值组成的对象。\nvar target_path = \"/upload/images/\";\nvar IOUtils = org.apache.commons.io.IOUtils; //创建快捷方式引用\nvar file = new File(Base.path+target_path, data.file1__name);\nvar os = new java.io.FileOutputStream(file); //在应用根目录创建文件输出流\ntry {\n  //复制文件流内容至文件输出流，data.file1为上传文件内容的输入流，data.file1__name为文件名称，data.file1__size为文件大小，可以使用app.getFiles获取。\n  IOUtils.copy(data.file1, os);\n} finally {\n  os.close(); //关闭输出流\n}\n// 需要下载的文件\nvar filepath = request.getSession().getServletContext().getRealPath(file);\n//app.run('update table set blob_field={?file1?} 使用此方法可以把上传的文件更新到blob_field字段\n//前台上传的参数无论是什么类型，传到后台后都是字符串\nvar result = {\n  filepath: request.getContextPath()+target_path+data.file1__name\n};\n//立即输出至客户端。最后一个参数true表示采用json串封装的方式返回成功信息，此方式仅适用于文件上传模式。\napp.send(Wb.encode(result), true);","itemId":"module"},"expanded":true,"children":[],"type":"module"}],"roles":{},"title":"图片上传","iconCls":"","inframe":false,"pageLink":""}