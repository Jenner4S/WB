{"hidden":false,"children":[{"configs":{"itemId":"module"},"expanded":true,"children":[{"configs":{"layout":"fit","itemId":"viewport1"},"expanded":true,"children":[{"configs":{"itemId":"grid1","editable":"true","multiSelect":"true"},"expanded":true,"children":[{"configs":{"itemId":"tbar"},"expanded":true,"children":[{"configs":{"itemId":"newBtn","tooltip":"添加新的记录","text":"添加","iconCls":"record_add_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"Wb.addEdit(app.grid1); //更多选项可使用Wb.add方法"}},{"configs":{"itemId":"delBtn","tooltip":"删除选择的记录","text":"删除","iconCls":"record_delete_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"/*\n建议使用此方法：\nWb.del(app.grid1, {\n  url: 'm?xwl=my/cust/delete',\n  titleField: 'STRING_FIELD'\n});\n*/\n//使用下面方法用于演示完整的步骤\nvar recs = app.grid1.getSelection();\nif (!recs.length) {\n  Wb.warn('请选择需要删除的记录。');\n  return;\n}\nWb.confirm('确定要删除选择的 ' + recs.length + ' 条记录吗？', function() {\n  Wb.request({\n    url: 'm?xwl=my/cust/delete', //使用basic-delete.xwl用于演示目的，建议使用delete.xwl\n    params: {\n      destroy: Wb.getData(recs, true)\n    },\n    success: function() {\n      Wb.remove(app.grid1, recs);\n       Wb.toast('数据删除成功。');\n    }\n  });\n});"}},{"configs":{"itemId":"item1","text":"-"},"expanded":false,"children":[],"type":"item"},{"configs":{"itemId":"saveBtn","tooltip":"保存所有的更改","text":"保存","iconCls":"save_icon"},"expanded":false,"children":[],"type":"item","events":{"click":"if (!Wb.verifyGrid(app.grid1)) //验证数据是否合法\n  return;\nWb.sync({\n  grid: app.grid1,\n  url: 'm?xwl=my/cust/save',\n  message: '正在保存中...',\n  success: function(resp) {\n    //ID_FIELD值在后台生成，把返回的ID_FIELD值列表同步到表格中\n    //Wb.syncCreate(app.grid1, Wb.decode(resp.responseText));\n    //如果需要同时同步新建的和修改的记录可以使用以下方法：\n    //var data=Wb.decode(resp.responseText);//假设需要同步新建的和修改的记录分别放在data对象的create和update属性中\n    //Wb.syncCreate(app.grid1,data.create,false);//false默认不commitChanges\n    //Wb.syncUpdate(app.grid1,data.update);//syncUpdate后执行commitChanges\n    \n    app.store.commitChanges(); //如果存在多个store可以设置normalName属性或通过app.grid.store方式找到对象\n    Wb.toast('数据保存成功。');\n  }\n});"}}],"type":"toolbar"},{"configs":{"itemId":"store","autoLoad":"true","url":"m?xwl=my/cust/cust-select"},"expanded":false,"children":[],"type":"store"},{"configs":{"itemId":"columns"},"expanded":true,"children":[{"configs":{"itemId":"rowNumCol","xtype":"rownumberer"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"ID","hidden":"true","dataIndex":"ID","text":"ID"},"expanded":false,"children":[],"type":"column"},{"configs":{"itemId":"CODE","dataIndex":"CODE","width":"150","text":"客户代码"},"expanded":false,"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"NAME","dataIndex":"NAME","width":"150","text":"客户名称"},"expanded":true,"children":[{"configs":{"allowBlank":"false","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"PRINCIPAL","dataIndex":"PRINCIPAL","width":"150","text":"客户负责人"},"expanded":true,"children":[{"configs":{"allowBlank":"true","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"TEL","dataIndex":"TEL","width":"150","text":"电话"},"expanded":true,"children":[{"configs":{"allowBlank":"true","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"EMAIL","dataIndex":"EMAIL","width":"150","text":"邮箱"},"expanded":true,"children":[{"configs":{"allowBlank":"true","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"},{"configs":{"itemId":"ADDRESS","dataIndex":"ADDRESS","width":"150","text":"地址"},"expanded":true,"children":[{"configs":{"allowBlank":"true","itemId":"editor"},"expanded":false,"children":[],"type":"text"}],"type":"column"}],"type":"array"}],"type":"grid"}],"type":"viewport"}],"type":"module"}],"roles":{"default":1,"manager":1,"user":1,"demo":1},"title":"客户管理","iconCls":"","inframe":false,"pageLink":""}